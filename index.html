<html>
<head>
<title>Drip Drop April Shower</title>
<script>
var canvas;
var context;
var drops = [];
var clouds = [];
var squares = [];

function Drop(x,y,color){
    this.x = x;
    this.y = y;
    this.color = color;
    this.dy = Math.random();
}

function Cloud(x,y,color){
    this.cx = x;
    this.cy = y;
    this.color = color;
}

function Square(x,y,w,color){
    this.sx = x;
    this.sy = y;
    this.sw = w;
    this.color = color;
    this.qy = Math.random();
}

function makeTitle(){
	var lines = [
	    ['Drip', 'Drop', 'Drenched'],
		['Little'],
		['April Shower', 'May Shower', 'July Shower', 'February Shower', 'August Shower']
	];
	var title ='';
	for (var i=0; i <lines.length; i++) {
		var random = Math.floor(Math.random() * lines[i].length);
		title += lines[i][random] + ' ';
	};
	return(title);
}

function init(){
	var title = makeTitle();
    canvas = document.getElementById('canvas');
    context = canvas.getContext('2d');
    
    alert("Hello!\nClick on the screen for rain drops!");
    
    window.addEventListener('resize', resizeCanvas, false);
    window.addEventListener('orientationchange', resizeCanvas, false);
    resizeCanvas();
    canvas.onclick = function(event){
        handleClick(event.clientX, event.clientY);
    };
    setInterval(handleClick,5);
    


}
function handleClick(x,y,w){
    var found = false;
    for(var i = 0; i<drops.length; i++){
        d = Math.sqrt((drops[i].x-x)*(drops[i].x-x) + (drops[i].y-y)*(drops[i].y-y));
        if(d<=5){
            drops.splice(i,1);
            found = true;
        }
}   
            for(var i = 0; i<squares.length; i++){
        d = Math.sqrt((squares[i].x-x)*(squares[i].x-x) + (squares[i].y-y)*(squares[i].y-y));
        if(d<=10){
            squares.splice(i,1);
            found = true;
        }
}
    fillBackgroundColor();
    if(!found){
    var colors = ["#000080", "#add8e6", "blue"];
        var color = colors[Math.floor(Math.random()*colors.length)];
        drops.push(new Drop(x,y,color));
        clouds.push(new Cloud(x,y,color));
        squares.push(new Square(x,y,w,color));
    }
    for(var i = 0; i<drops.length; i++){
        drawDrop(drops[i]);
}
    	for(var i = 0; i<squares.length; i++){
        drawSquare(squares[i]);
}
  			for(var i = 0; i<clouds.length; i++){
        drawCloud(clouds[i]);
    }
}
function drawDrop(drop){
    context.beginPath();
    context.arc(drop.x, drop.y, 5, 0, Math.PI);
    context.fillStyle = drop.color;
    context.moveTo(drop.x - 5, drop.y);
    context.lineTo(drop.x, drop.y - 7);
    context.lineTo(drop.x + 5, drop.y);
    context.closePath();
    context.fill();
    if (drop.y + drop.dy > canvas.height || drop.y + drop.dy < 0)
        drop.dy != -drop.dy;
    drop.y += drop.dy;
};


function drawSquare(square){
	var sw = Math.floor(4);
	var sx = Math.floor(Math.random() * canvas.width);
	var sy = Math.floor(Math.random() * canvas.height);
	context.beginPath();
	context.rect(sx, sy, sw, sw); 
	context.fillStyle = square.color;
	context.fill();
	
	if (square.sy + square.qy > canvas.height || square.sy + square.qy < 0)
        square.qy != -square.qy;
    square.sy += square.qy;
};

function drawCloud(cloud){
      context.beginPath();
      context.moveTo(170, 80);
      context.bezierCurveTo(130, 100, 130, 150, 230, 150);
      context.bezierCurveTo(250, 180, 320, 180, 340, 150);
      context.bezierCurveTo(420, 150, 420, 120, 390, 100);
      context.bezierCurveTo(430, 40, 370, 30, 340, 50);
      context.bezierCurveTo(320, 5, 250, 20, 250, 50);
      context.bezierCurveTo(200, 5, 150, 20, 170, 80);
      context.closePath();
      context.lineWidth = 5;
      context.fillStyle = 'white';
      context.fill();

};

function drawText(canvas, context, title){
	context.fillStyle = 'black';
	context.font = 'bold 1em sans-serif';
	context.textAlign = 'right';
	context.fillText(title, canvas.width-20, canvas.height-40);


}


function fillBackgroundColor(){
    context.fillStyle = 'gray';
    context.fillRect(0,0,canvas.width,canvas.height);
}
function resizeCanvas(){
    canvas.width = window.innerWidth - 20;
    canvas.height = window.innerHeight - 20;
    fillBackgroundColor();
    for(var i = 0; i<drops.length; i++){
        drawDrop(drops[i]);
    }
        for(var i = 0; i<clouds.length; i++){
        drawCloud(clouds[i]);
    }
            for(var i = 0; i<squares.length; i++){
        drawSquare(squares[i]);
    }
}
window.onload = init;{
	var button = document.getElementById('artButton');
	button.onclick = makeTitle();
}
</script>
</head>
<body>
<canvas id='canvas' width=500 height=500></canvas>
<form>
<input type ='button' id='artButton' value= 'Make Showers'>
</form>
</body>
</html>