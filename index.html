<!doctype html>
<html>
<head>

<script>
var canvas;
var context;
var drops = [];

function Drop(x,y,color){
	this.x = x;
	this.y = y;
	this.color = color;
    this.dy = Math.random();
}
function init(){
	canvas = document.getElementById('canvas');
	context = canvas.getContext('2d');
	window.addEventListener('resize', resizeCanvas, false);
	window.addEventListener('orientationchange', resizeCanvas, false);
	resizeCanvas();
	canvas.onclick = function(event){
		handleClick(event.clientX, event.clientY);
	};
	setInterval(handleClick,5);

}
function handleClick(x,y){
	var found = false;
	for(var i = 0; i<drops.length; i++){
		d = Math.sqrt((drops[i].x-x)*(drops[i].x-x) + (drops[i].y-y)*(drops[i].y-y));
		if(d<=30){
			drops.splice(i,1);
			found = true;
		}
	}
	fillBackgroundColor();
	if(!found){
	var colors = ["#000080", "#add8e6", "blue", "white"];
		var color = colors[Math.floor(Math.random()*colors.length)];
		drops.push(new Drop(x,y,color));
	}
	for(var i = 0; i<drops.length; i++){
		drawDrop(drops[i]);
	}
}
function drawDrop(drop){
	context.beginPath();
	context.arc(drop.x, drop.y, 5, 0, Math.PI);
	context.fillStyle = drop.color;
	context.moveTo(drop.x - 5, drop.y);
    context.lineTo(drop.x, drop.y - 7);
    context.lineTo(drop.x + 5, drop.y);
	context.closePath();
	context.fill();
	if (drop.y + drop.dy > canvas.height || drop.y + drop.dy < 0)
    	drop.dy != -drop.dy;
	drop.y += drop.dy;
	
	return {
        'y': drop.y
    };
  	
  	        
}

function fillBackgroundColor(){
	context.fillStyle = 'gray';
	context.fillRect(0,0,canvas.width,canvas.height);
}
function resizeCanvas(){
	canvas.width = window.innerWidth - 20;
	canvas.height = window.innerHeight - 20;
	fillBackgroundColor();
	for(var i = 0; i<drops.length; i++){
		drawDrop(drops[i]);
	}
}
window.onload = init;
</script>
</head>
<body>
<canvas id='canvas' width=500 height=500></canvas>
</body>
</html>
	

